# üìã Exemplos Pr√°ticos de Testes da API

Ol√°! Este arquivo √© como um guia de testes para voc√™ brincar com a API do sistema de controle de estoque. Vamos usar comandos simples (curl) para testar tudo, como se estivesse testando um brinquedo novo. Voc√™ pode usar ferramentas como Postman ou Insomnia tamb√©m, se preferir uma interface gr√°fica. A API fica rodando em http://localhost:3001 (quando voc√™ liga o servidor local).

## üîê Antes de Come√ßar os Testes

Para tudo funcionar direitinho, prepare o terreno:
1. **Ligue o Servidor**: Rode `npm start` ou `node server.js` dentro da pasta `api/`.
2. **Banco de Dados Pronto**: Verifique se o MySQL est√° ligado e as tabelas existem (d√° uma olhada no `limpeza_banco.sql` para limpar tudo se precisar).
3. **Login Primeiro**: Para usar a maioria dos endpoints, voc√™ precisa estar logado. Vamos salvar cookies para manter a sess√£o ativa.

## üß™ Vamos Testar Passo a Passo

### 1. Ver Todas as Rotas Dispon√≠veis (Mapa da API)
```bash
curl -X GET http://localhost:3001/api
```
**O que Espera Ver**: Um JSON simples mostrando as rotas, tipo um mapa do que d√° para fazer.

### 2. Fazer Login (Chave para Tudo)
```bash
curl -X POST http://localhost:3001/login \
  -H "Content-Type: application/json" \
  -d '{"usuario": "admin", "senha": "senha123"}' \
  --cookie-jar cookies.txt
```
**Dica**: Troque "admin" e "senha123" pelas suas credenciais reais. O `--cookie-jar` salva os cookies para usar depois.  
**O que Espera Ver**: Vai te mandar para a p√°gina inicial se der certo.

### 3. Ver Todos os Produtos Cadastrados
```bash
curl -X GET http://localhost:3001/produtos \
  --cookie cookies.txt
```
**O que Espera Ver**: Uma lista em JSON com todos os produtos, como `[{ "produto_id": 1, "nome": "Sab√£o em P√≥", ... }]`.

### 4. Cadastrar um Novo Produto
```bash
curl -X POST http://localhost:3001/produtos \
  -H "Content-Type: application/json" \
  --cookie cookies.txt \
  -d '{
    "nome": "Detergente L√≠quido",
    "marca": "Limpeza Total",
    "volume": "1L",
    "tipo_embalagem": "Pl√°stico",
    "aplicacao": "Limpeza Geral",
    "estoque": 50,
    "estoque_minimo": 10
  }'
```
**O que Espera Ver**: `{"msg": "Cadastro Efetuado"}` ‚Äì sucesso!

### 5. Registrar Entrada no Estoque (Chegou Mais Produto)
```bash
curl -X PUT http://localhost:3001/estoque/entrada \
  -H "Content-Type: application/json" \
  --cookie cookies.txt \
  -d '{
    "produto_id": 1,
    "tipo": "Compra",
    "quantidade": 20
  }'
```
**O que Espera Ver**: `{"msg": "Entrada registrada com sucesso."}` ‚Äì o estoque aumentou!

### 6. Registrar Sa√≠da no Estoque (Vendeu Produto)
```bash
curl -X PUT http://localhost:3001/estoque/saida \
  -H "Content-Type: application/json" \
  --cookie cookies.txt \
  -d '{
    "produto_id": 1,
    "tipo": "Venda",
    "quantidade": 5
  }'
```
**O que Espera Ver**: `{"msg": "Sa√≠da registrada com sucesso."}` ‚Äì o estoque diminuiu!

### 7. Ver Alertas de Estoque Baixo
```bash
curl -X GET http://localhost:3001/alertas \
  --cookie cookies.txt
```
**O que Espera Ver**: `{"alertas": [{"nome": "Sab√£o em P√≥", "estoque": 5, "estoque_minimo": 10}]}` ‚Äì produtos que precisam ser repostos.

### 8. Fazer Logout (Sair do Sistema)
```bash
curl -X POST http://localhost:3001/logout \
  --cookie cookies.txt
```
**O que Espera Ver**: Vai te mandar de volta para a p√°gina de login.

## üß™ Testes para Ver se Est√° Tudo Protegido

Vamos testar o que acontece quando fazemos algo errado ou sem permiss√£o:

### Cadastrar Produto com Campos Vazios
```bash
curl -X POST http://localhost:3001/produtos \
  -H "Content-Type: application/json" \
  --cookie cookies.txt \
  -d '{"nome": "Produto Incompleto"}'
```
**O que Espera Ver**: `{"msg": "Todos os campos s√£o obrigat√≥rios."}` (erro 400) ‚Äì n√£o deixa passar!

### Tentar Entrada com Quantidade Negativa
```bash
curl -X PUT http://localhost:3001/estoque/entrada \
  -H "Content-Type: application/json" \
  --cookie cookies.txt \
  -d '{
    "produto_id": 1,
    "tipo": "Compra",
    "quantidade": -10
  }'
```
**O que Espera Ver**: `{"msg": "Quantidade deve ser positiva."}` (erro 400) ‚Äì protege contra erros bobos!

### Tentar Acessar sem Estar Logado
```bash
curl -X GET http://localhost:3001/produtos
```
**O que Espera Ver**: Redirecionamento para `/login` ‚Äì seguran√ßa em a√ß√£o!

## üìù Dicas para Testar com Seguran√ßa

- **Mantenha a Sess√£o**: Use sempre `--cookie cookies.txt` nas requisi√ß√µes depois do login, para ficar "logado".
- **IDs dos Produtos**: Pegue IDs v√°lidos da resposta de `/produtos` ou de cadastros que voc√™ fez.
- **Configura√ß√µes**: Verifique se o arquivo `.env` tem as senhas certas para o banco e login.
- **Banco Limpo**: Rode o `limpeza_banco.sql` antes de testar, para come√ßar do zero.

Agora √© s√≥ testar e ver tudo funcionando! Se der algum erro estranho, confira se o servidor est√° ligado e o banco conectado. Para mais detalhes sobre cada endpoint, olhe o `README_endpoints.md`. Divirta-se testando! üöÄ
